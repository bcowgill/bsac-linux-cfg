# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#
# http://i3wm.org/docs/userguide.html#configuring
# i3wm configuration suggestions
# http://i3wm.org/docs/user-contributed/lzap-config.html
#
# TODO:
# install better x fonts http://www.cl.cam.ac.uk/~mgk25/ucs-fonts.html
# named workspaces
# try dunst
# try workrave
# i3status configuration
# dmenu_desktop default font configuration problem passing dmenu command with font
# config show errors - better terminal font
# exit prompt bug? multiple prompts can be fired up. No keyboard control.
#======================================================================

# Errors rising from this configuration are in ~/.xsession-errors

# BSAC var settings
set $bin /home/bcowgill/bin
set $font_size 18
set $font_name ProFontWindows

# define vars for monitor screens
# use xrandr --current command to get monitor screen names
# should match OUTPUT_MAIN/OUTPUT_AUX from detect-monitors.sh
set $main eDP1
set $aux HDMI1

# lemonchiffon = FFFACD
set $lockcolor FFFACD
# brick = 683232
set $lockcolor 683232
set $lockcolor 4c4444

# define vars for workspaces
set $shell 1
set $edit 2
set $app 3
set $email 4
set $build 5
set $chat 6
set $help 7
set $files 8

set $exec exec --no-startup-id
set $i3msg exec --no-startup-id i3-msg

# define fonts available
# use xfontsel -print to pick and get a font definition
# or xlsfonts
set $popup_font 12x24
set $courier -bitstream-courier 10 pitch-bold-r-normal--0-0-0-0-m-0-iso8859-1
set $courierUTF -bitstream-courier 10 pitch-bold-r-normal--0-0-0-0-m-0-iso10646-1
set $charterUTF -bitstream-bitstream charter-bold-r-normal--0-0-0-0-p-0-iso10646-1
#i3-input -l 30 -P 'Test of i3-input ' -f "-bitstream-bitstream charter-bold-r-normal--0-0-0-0-p-0-iso10646-1"
#i3-input -l 30 -P 'Test of i3-input ' -f "-bitstream-courier 10 pitch-bold-r-normal--0-0-0-0-m-0-iso10646-1"

# Initialise monitor resolutions, mouse/trackpad/touch/keyboard setup
exec --no-startup-id $bin/i3-start.sh

# default workspaces layout with tabs default/stacking/tabbed
workspace_layout tabbed
# allow workspace toggling back and forth
# i.e. press Mod+1 to check the web, press Mod+1 again to go back to the workspace you were in
# turning this off, use Win-Tab
workspace_auto_back_and_forth no

# trackpad may make focus follows mouse useless
focus_follows_mouse no

# hide the vertical borders at edge of screen
hide_edge_borders vertical

# assign workspaces to monitors
workspace 1   output $aux
workspace 2   output $aux
workspace 3   output $aux
workspace 4   output $aux
workspace 9   output $aux

workspace 5   output $main
workspace 6   output $main
workspace 7   output $main
workspace 8   output $main
workspace 10  output $main

# put clients on specific workspaces. The first matching rule below
# determines where a window goes.
# allowed matching criteria:
# http://i3wm.org/docs/userguide.html#command_criteria
# window class names:
# xprop | grep WM_CLASS >> gui.sh
#                   instance, class
# WM_CLASS(STRING) = "skype", "Skype"

assign [class="^Git-gui$"] $shell
assign [class="^jetbrains-webstorm$"] $edit
assign [class="^Skype$"] $chat
assign [class="^Chromium-browser$" title="^Outlook Web App"] $email

# Force some windows to float
for_window [class="^Git-gui--askpass$"] floating enable

# Force other windows not to float
#for_window [class="^Skype$"] floating disable
for_window [class="^XCalc$"] floating enable
for_window [class="^Workrave$"] floating enable

# Force some windows to fullscreen
for_window [class="^Meld$"] fullscreen
for_window [class="^Diffmerge$"] fullscreen

# Force others to the scratchpad
#for_window [class="^Gnome-terminal$" instance="scratchpad"] border 1pixel; move scratchpad
#for_window [class="^Gnome-terminal$" title="~/bin/scratchpad"] border 1pixel; move scratchpad

#assign [class="^Gnome-terminal$"] $shell
#assign [class="^Chromium-browser$"] $app

#assign [class="^build.sh$"] $build
#assign [class="^build-app.sh$"] $build
#assign [class="^XTerm$"] $build
#assign [class="^konsole$"] $build
#assign [class="^Firefox$"] $build

#WM_CLASS(STRING) = "ksnapshot", "Ksnapshot"
#WM_CLASS(STRING) = "diffmerge", "Diffmerge"
#WM_CLASS(STRING) = "nautilus", "Nautilus"
# system settings app
#WM_CLASS(STRING) = "unity-control-center", "Unity-control-center"
#WM_CLASS(STRING) = "topBox", "Xman"
#WM_CLASS(STRING) = "manualBrowser", "Xman"

# define names for the mod keys when we want to be specific
set $alt Mod1
set $win Mod4

#======================================================================

# i3 config file (v4)
#
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

# Mod4 = Windows key Mod1 = Alt
set $mod Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:monospace $font_size

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono $font_size

# BSAC programmer font
font pango:$font_name $font_size

# Before i3 v4.8, we used to recommend this one as the default:
# font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, its unicode glyph coverage is limited, the old
# X core fonts rendering does not support right-to-left and this being a bitmap
# font, it doesn’t scale on retina/hidpi displays.

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# BSAC start a terminal
#bindsym $mod+Return exec i3-sensible-terminal
bindsym $mod+Return exec mygterm.sh

# kill focused window
bindsym $mod+Shift+q kill

# start dmenu (a program launcher)
#bindsym $mod+d exec dmenu_run
# BSAC set up dmenu on bottom, ignore case,  with font
bindsym $mod+d exec dmenu_run -b -i -fn "$popup_font"
# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
# BSAC assigned to shifted dmenu key
# TODO should be able to pass the dmenu='dmenu -b -i -fn ...' to the command
# but that did not work, so copied the i3-dmenu-desktop command to my bin
# dir and hard coded the dmenu command in there.
bindsym $mod+Shift+d exec --no-startup-id i3-dmenu-desktop

# change focus
bindsym $mod+j focus left
bindsym $mod+k focus down
bindsym $mod+l focus up
bindsym $mod+semicolon focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+j move left
bindsym $mod+Shift+k move down
bindsym $mod+Shift+l move up
bindsym $mod+Shift+semicolon move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
# BSAC assign to z because it's below the focus parent key
bindsym $mod+z focus child
#bindsym $mod+d focus child

# switch to workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
#bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"
# BSAC more readable font on exit prompt
bindsym $mod+Shift+e exec "i3-nagbar -f '$popup_font' -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym j resize shrink width 10 px or 10 ppt
        bindsym k resize grow height 10 px or 10 ppt
        bindsym l resize shrink height 10 px or 10 ppt
        bindsym semicolon resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
        position top
        status_command i3status
        # BSAC configure bar to hide unless mod key (windows) pressed
        mode hide
        hidden_state hide
        modifier $mod
        # put notification tray on main monitor only
        tray_output primary
}

# BSAC bind these to some keys Mod+Shift+m to mark and Mod+g to go to mark
# Ask for a mark name to mark the current window
bindsym $mod+Shift+m exec i3-input -f '$popup_font' -F 'mark %s' -l 15 -P 'Name for Window Mark: '
# Go to the container marked with above example:
bindsym $mod+g exec i3-input -f '$popup_font' -F '[con_mark="%s"] focus' -l 15 -P 'Go to Marked Window: '

# BSAC next set of key bindings inspired/copied from
# http://i3wm.org/docs/user-contributed/lzap-config.html
# screen locker (first move to "safe" workspace without any chat app)
bindsym Control+$alt+Shift+l exec i3-msg workspace 1 && i3lock -c $lockcolor -d
bindsym Control+$alt+l exec i3-msg workspace 1 && xscreensaver-command -lock

# next/previous workspace
bindsym $alt+Tab focus right
bindsym $alt+Shift+Tab focus left
bindsym $win+Tab workspace back_and_forth

# border changing
bindsym $mod+b border toggle

# scratchpad
bindsym $mod+m move scratchpad
bindsym $mod+o scratchpad show
#
# TEMPORARY BSAC start a browser or manual page browser with hot key
bindsym $mod+p exec chromium-browser --incognito
#bindsym $mod+o exec xman

# Use external script to launch all windows with apps where I want them, requires sleeps
# this script does not use the $shell and other vars defined above though so possible problems
exec --no-startup-id $bin/i3-launch.sh
